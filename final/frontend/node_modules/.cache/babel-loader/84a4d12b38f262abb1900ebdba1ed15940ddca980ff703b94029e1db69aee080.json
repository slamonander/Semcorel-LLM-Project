{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import Coco from'./Coco';import'./TypePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TypePage=()=>{const[userInput,setUserInput]=useState('');const[conversationHistory,setConversationHistory]=useState([]);const[messages,setMessages]=useState([]);const[isTyping,setIsTyping]=useState(false);const[fontSize,setFontSize]=useState(19);// Default font size\nconst navigate=useNavigate();const chatBoxRef=useRef(null);// Ref for chat box container\nconst addMessage=(content,className)=>{setMessages(prevMessages=>[...prevMessages,{content,className}]);};const sendMessage=async()=>{if(!userInput.trim())return;// Display user message\naddMessage(userInput,'user-message');setConversationHistory(prevHistory=>[...prevHistory,{role:'user',content:userInput}]);setUserInput('');try{setIsTyping(true);// Show typing animation\n// Prepare JSON data\nconst payload={userInput:userInput,history:JSON.stringify(conversationHistory)};// Send message to the server\nconst response=await fetch('/submit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await response.json();setIsTyping(false);// Hide typing animation\n// Display bot response\naddMessage(data.response,'bot-message');setConversationHistory(prevHistory=>[...prevHistory,{role:'assistant',content:data.response}]);}catch(error){console.error('Error:',error);setIsTyping(false);// Hide typing animation\naddMessage('An error occurred while sending your message.','bot-message');}};const handleKeyDown=event=>{if(event.key==='Enter'){sendMessage();}};const changeFontSize=adjustment=>{setFontSize(prevSize=>Math.max(12,Math.min(36,prevSize+adjustment)));// Restrict between 12px and 36px\n};// Automatically scroll to the bottom of the chat box\nuseEffect(()=>{if(chatBoxRef.current){chatBoxRef.current.scrollTop=chatBoxRef.current.scrollHeight;}},[messages,isTyping]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"triangle-container\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"triangle\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 100 125\",preserveAspectRatio:\"none\",children:/*#__PURE__*/_jsx(\"path\",{className:\"wave\",d:\"M 0,50 Q 20,35 45,40 T 100,15 L 100,0 L 0,0 Z\",fill:\"#5A9BFF\",transform:\"skewY(-15)\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-invis\",onClick:()=>navigate('/'),children:/*#__PURE__*/_jsx(\"span\",{className:\"material-icons invis\",children:\"arrow_back_ios\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"coco-container\",children:/*#__PURE__*/_jsx(Coco,{className:\"coco-small\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-size-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{style:{fontSize:'19px'},onClick:()=>changeFontSize(-2),children:\"A-\"}),/*#__PURE__*/_jsx(\"button\",{style:{fontSize:'21px'},onClick:()=>changeFontSize(2),children:\"A+\"})]}),/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",href:\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=arrow_upward\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"chat-box\",className:\"chat-box\",ref:chatBoxRef,children:[messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:`chat-message ${msg.className}`,style:{fontSize:`${fontSize}px`},children:msg.content},index)),isTyping&&/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message bot-message typing-animation\",children:[/*#__PURE__*/_jsx(\"span\",{children:\".\"}),/*#__PURE__*/_jsx(\"span\",{children:\".\"}),/*#__PURE__*/_jsx(\"span\",{children:\".\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userInput,onChange:e=>setUserInput(e.target.value),onKeyDown:handleKeyDown,placeholder:\"Type a message...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:/*#__PURE__*/_jsx(\"span\",{className:\"material-symbols-outlined\",children:\"arrow_upward\"})})]})]})]});};export default TypePage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","Coco","jsx","_jsx","jsxs","_jsxs","TypePage","userInput","setUserInput","conversationHistory","setConversationHistory","messages","setMessages","isTyping","setIsTyping","fontSize","setFontSize","navigate","chatBoxRef","addMessage","content","className","prevMessages","sendMessage","trim","prevHistory","role","payload","history","JSON","stringify","response","fetch","method","headers","body","data","json","error","console","handleKeyDown","event","key","changeFontSize","adjustment","prevSize","Math","max","min","current","scrollTop","scrollHeight","children","xmlns","viewBox","preserveAspectRatio","d","fill","transform","onClick","style","rel","href","id","ref","map","msg","index","type","value","onChange","e","target","onKeyDown","placeholder"],"sources":["/Users/kavinrajasekaran/Documents/UCMerced/CurrentClasses/CSE120/Semcorel-LLM/Semcorel-LLM-Project/final/frontend/src/TypePage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Coco from './Coco';\r\nimport './TypePage.css';\r\n\r\nconst TypePage = () => {\r\n  const [userInput, setUserInput] = useState('');\r\n  const [conversationHistory, setConversationHistory] = useState([]);\r\n  const [messages, setMessages] = useState([]);\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [fontSize, setFontSize] = useState(19); // Default font size\r\n  const navigate = useNavigate();\r\n  const chatBoxRef = useRef(null); // Ref for chat box container\r\n\r\n  const addMessage = (content, className) => {\r\n    setMessages((prevMessages) => [\r\n      ...prevMessages,\r\n      { content, className },\r\n    ]);\r\n  };\r\n\r\n  const sendMessage = async () => {\r\n    if (!userInput.trim()) return;\r\n\r\n    // Display user message\r\n    addMessage(userInput, 'user-message');\r\n    setConversationHistory((prevHistory) => [\r\n      ...prevHistory,\r\n      { role: 'user', content: userInput },\r\n    ]);\r\n    setUserInput('');\r\n\r\n    try {\r\n      setIsTyping(true); // Show typing animation\r\n\r\n      // Prepare JSON data\r\n      const payload = {\r\n        userInput: userInput,\r\n        history: JSON.stringify(conversationHistory),\r\n      };\r\n\r\n      // Send message to the server\r\n      const response = await fetch('/submit', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      setIsTyping(false); // Hide typing animation\r\n\r\n      // Display bot response\r\n      addMessage(data.response, 'bot-message');\r\n      setConversationHistory((prevHistory) => [\r\n        ...prevHistory,\r\n        { role: 'assistant', content: data.response },\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setIsTyping(false); // Hide typing animation\r\n      addMessage('An error occurred while sending your message.', 'bot-message');\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.key === 'Enter') {\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  const changeFontSize = (adjustment) => {\r\n    setFontSize((prevSize) => Math.max(12, Math.min(36, prevSize + adjustment))); // Restrict between 12px and 36px\r\n  };\r\n\r\n  // Automatically scroll to the bottom of the chat box\r\n  useEffect(() => {\r\n    if (chatBoxRef.current) {\r\n      chatBoxRef.current.scrollTop = chatBoxRef.current.scrollHeight;\r\n    }\r\n  }, [messages, isTyping]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"triangle-container\">\r\n        <svg className=\"triangle\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 125\" preserveAspectRatio=\"none\">\r\n          <path className=\"wave\" d=\"M 0,50 Q 20,35 45,40 T 100,15 L 100,0 L 0,0 Z\" fill=\"#5A9BFF\" transform=\"skewY(-15)\" />\r\n        </svg>\r\n        <button className=\"btn-invis\" onClick={() => navigate('/')}>\r\n          <span className=\"material-icons invis\">arrow_back_ios</span>\r\n        </button>\r\n        <div className=\"coco-container\">\r\n          <Coco className=\"coco-small\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"font-size-buttons\">\r\n        <button\r\n          style={{ fontSize: '19px' }}\r\n          onClick={() => changeFontSize(-2)}\r\n        >\r\n          A-\r\n        </button>\r\n        <button\r\n          style={{ fontSize: '21px' }}\r\n          onClick={() => changeFontSize(2)}\r\n        >\r\n          A+\r\n        </button>\r\n      </div>\r\n      {/* Chat container */}\r\n      <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=arrow_upward\" />\r\n      <div className=\"chat-container\">\r\n        <div id=\"chat-box\" className=\"chat-box\" ref={chatBoxRef}>\r\n          {messages.map((msg, index) => (\r\n            <div key={index} className={`chat-message ${msg.className}`} style={{ fontSize: `${fontSize}px` }}>\r\n              {msg.content}\r\n            </div>\r\n          ))}\r\n          {isTyping && (\r\n            <div className=\"chat-message bot-message typing-animation\">\r\n              <span>.</span>\r\n              <span>.</span>\r\n              <span>.</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"input-container\">\r\n          <input\r\n            type=\"text\"\r\n            value={userInput}\r\n            onChange={(e) => setUserInput(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"Type a message...\"\r\n          />\r\n          <button onClick={sendMessage}>\r\n            <span className=\"material-symbols-outlined\">arrow_upward</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TypePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}